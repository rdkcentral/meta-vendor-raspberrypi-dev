# Set default value for BUILD_VARIANT
BUILD_VARIANT ?= "debug"

# Add build variant to distribution overrides and features
DISTROOVERRIDES .= ":${BUILD_VARIANT}-variant"
DISTRO_FEATURES:append = " ${BUILD_VARIANT}-variant"

# Set variant-specific tmp and buildhistory directories
# Note: Poky automatically appends TCLIBCAPPEND ("-glibc") to TMPDIR
# So we set base paths and let Poky add the -glibc suffix
TMPDIR ?= "${@'${TOPDIR}/tmp' if d.getVar('BUILD_VARIANT') == 'debug' else '${TOPDIR}/tmp-${BUILD_VARIANT}'}"
BUILDHISTORY_DIR ?= "${@'${TOPDIR}/buildhistory' if d.getVar('BUILD_VARIANT') == 'debug' else '${TOPDIR}/buildhistory-${BUILD_VARIANT}'}"

# Set default image type ID (used for image naming and identification)
IMAGE_TYPE_ID ?= "DEV"

# Add build variant suffix to image names for differentiation
# [temporary] Only add suffix for non-debug builds (prod, prodlog)- once jenkins supports multiconfig we can include debug too.
IMAGE_BASENAME = "${@'${PN}' if d.getVar('BUILD_VARIANT') == 'debug' else '${PN}-${BUILD_VARIANT}'}"
